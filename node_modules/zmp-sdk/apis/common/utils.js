import r from'./../external/@swc/helpers/src/_async_to_generator.mjs.js';import t from"../utils/query-string.js";import{APIS as e}from"../constants.js";import o from"../utils/lodash.js";import n from"../utils/request.js";import{__generator as a}from'./../external/tslib/tslib.es6.js';import s from"../appEnv/getEnv.js";var i,d=(i=r((function(r,n,s){var i,d,p,u;return a(this,(function(a){switch(a.label){case 0:return i={appId:r,versionStatus:n},o.isUndefined(s)||(i.currentVersion=s),d=t.appendToUrl(e.GET_APP_INFO,i),[4,fetch(d,{credentials:"include"})];case 1:return(p=a.sent()).ok?[4,p.json()]:[3,3];case 2:if((u=a.sent()).err<0||!u.data)throw new Error(u);return[2,{name:u.data.name,version:u.data.version,description:u.data.description,appUrl:u.data.appUrl,qrCodeUrl:u.data.qrCodeUrl,logoUrl:u.data.logoUrl}];case 3:throw new Error("Can't get app info")}}))})),function(r,t,e){return i.apply(this,arguments)});function p(r){try{var t=r.map((function(r){return{action:r.action,error:r.error,message:r.message,data:r.data}}));n.execute(e.SEND_ACTION_LOG,"post",{appId:window.APP_ID,data:JSON.stringify(t)},(function(){})),window.zmpSentry&&window.zmpSentry.captureMessage("Result from native",{extra:{data:r}})}catch(r){}}var u=function(r){return r.replace(/[A-Z]/g,(function(r){return"_".concat(r.toLowerCase())}))},c=function(){var r,t,e=Number((null===(r=s())||void 0===r?void 0:r.zaloVersion)||""),o=((null===(t=s())||void 0===t?void 0:t.platformName)||"").toLowerCase();return"android"===o?e%1e4:e};export{u as camelToSnakeCase,d as getAppInfo,c as getZaloVersionCode,p as sendLogData};
